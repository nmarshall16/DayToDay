<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/onsenui.css">
  <link rel="stylesheet" href="css/onsen-css-components.min.css">
  <script src="js/onsenui.min.js"></script>
  <script src="js/jquery.min.js"></script>
     <script>
    var showTemplateDialog = function() {
      var dialog = document.getElementById('my-dialog');

      if (dialog) {
        dialog.show();
      } else {
        ons.createElement('dialog.html', { append: true })
          .then(function(dialog) {
            dialog.show();
          });
      }
    };

    var showTemplateDialogTwo = function() {
      var dialog = document.getElementById('my-dialogDelete');

      if (dialog) {
        dialog.show();
      } else {
        ons.createElement('dialog.html', { append: true })
          .then(function(dialog) {
            dialog.show();
          });
      }
    };

    var hideDialog = function(id) {
      document
        .getElementById(id)
        .hide();
    };

    $(document).ready(function(){
      /*
        Llamadas a la tabla contacto de la base de datos
        * La url que se debe ingresar es la siguiente: http://209.222.103.210/~prestash/contacto.php
        * El type debe ser a traves de POST o post
        * En data se encuentra la informacion mas importante aqui se deben indicar los datos que enviaremos al servidor para hacer las consultas a continuacion explicare cuales son los datos que se deben enviar para cada consulta.
        - Para agregar un nuevo contacto data debe tener el siguiente formato
          data: {
          'metodo': 'agregarContacto',
          'usuario_id': 1,
          'contacto_id': 9,
          }

        - Para buscar un nuevo contacto data debe tener el siguiente formato:
          data: {
          'metodo': 'buscarContacto',
          'usuario_id': 9,
          'buscar': 'correo_ingresado',
          }
          nota: la busqueda se hace a través de el correo el electronico 

        - Para cargar los contactos de un usuario especifico data debe tener el siguiente formato:
          data: {
          'metodo': 'verContactos',
          'usuario_id': 8,
          }

        - Para borrar una contacto de un usuario data debe tener el siguiente formato: 
          data: {
          'metodo': 'borrarContactos',
          'usuario_id': 1,
          'contacto_id': 9,
          }
        por ultimo se deben agregar estos ultimos valores al ajax para que pueda acceder correctamente al archivo php 
        crossDomain: true,
        cache: false,

        A continuacion les muestro un ejemplo de como se cargar la lista de contactos a través de ajax
      */
        $.ajax({
        url: 'http://209.222.103.210/~prestash/contacto.php',
        type: 'post',
        data: {
          'metodo': 'verContactos',
          'usuario_id': 9,
        },
        crossDomain: true,
        cache: false,                                        
        beforeSend: function() {
        },
        success: function(data) {
          console.log(data);
          // Con esta consulta se valida que no haya habido ningun problema con la consulta  
          if(!data['errores']['error']) {
            // Aqui hay un ejemplo de como mostrar los datos
            $("#result").html(""); 
            data['contactos'].forEach(function(contacto) {
            $("#result").append("<li>"+contacto['nombre']+"</li>"); 
            }); 
          }else{
            // Aqui podran ver el error que se genero
            console.log(data['errores']['description']);
          }
        },
        error:function(jqXHR,text_status,strError){ 
          console.log(jqXHR);
        }
      });
      $(document).on("click",".btnFinish", function(){
        alert($(".btnGo").text());
        $(".btnGo").css('background', "#FFFFFF");
      });
    });
  </script>
  <style type="text/css">
    footer {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 52px;
}
  #dos{
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 113px;
}
  </style>
</head>
<body>
  <ons-splitter>
    <ons-splitter-side id="menu" side="right" width="220px" collapse swipeable>
      <ons-page>
        <ons-list>
          <ons-list-item onclick="fn.load('home.html')" tappable>
            Actividades 
          </ons-list-item>
          <ons-list-item onclick="fn.load('settings.html')" tappable>
            Eventos
          </ons-list-item>
          <ons-list-item onclick="fn.load('about.html')" tappable>
            Contactos
          </ons-list-item>
        </ons-list>
      </ons-page>
    </ons-splitter-side>
    <ons-splitter-content id="content" page="home.html"></ons-splitter-content>
  </ons-splitter>
  <template id="home.html">
        <ons-page>
      <ons-toolbar>
        <div class="left">
          <ons-toolbar-button>
            <ons-icon icon="fa-angle-left"></ons-icon>
          </ons-toolbar-button>
        </div>
        <div class="center">
          Contactos
        </div>
        <div class="right">
          <ons-toolbar-button onclick="fn.open()">
            <ons-icon icon="md-menu"></ons-icon>
          </ons-toolbar-button>
        </div>
      </ons-toolbar>
      <br><br>
      <ons-row>
        <ons-col >
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col >
          Contacto 1 <br><div style="font-size: 10px;">Contacto@gmail.com</div>
        </ons-col>
        <ons-col  ></ons-col>
        <ons-col style="  text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col >
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col >
          Contacto 2 <br><div style="font-size: 10px;">ContactoNe@gmail.com</div>
        </ons-col>
        <ons-col></ons-col>
        <ons-col style="  text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col >
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col >
          Contacto 3 <br><div style="font-size: 10px;">ContactoTwo@gmail.com</div>
        </ons-col>
        <ons-col ></ons-col>
        <ons-col style="  text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col >
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col >
          Contacto 4 <br><div style="font-size: 10px;">ContactoFour@gmail.com</div>
        </ons-col>
        <ons-col ></ons-col>
        <ons-col style=" text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <footer>
        <ons-row>
          <ons-col><div style="width: 100%; border-top: #1094 1px solid; border-left: #1094 1px solid; border-right: #1094 1px solid;"><br></div><ons-input onkeyup="fn.load('searchContact.html')"  style="width: 100%; border-left: #1094bc 1px solid; border-right: #1094bc 1px solid; border-bottom: #1094bc 1px solid;" trannsparent placeholder="Buscar conocidos"></ons-input></ons-col>
          <ons-col style="text-align: center"><ons-button style="width: 100%; background: #1094bc; color: white; height: 52px;"><ons-icon icon="fa-user-plus"></ons-icon> Añadir</ons-button></ons-col>
        </ons-row>
      </footer>
      <ons-dialog id="my-dialogDelete">
    <div style="text-align: center; padding: 10px;">
      <ons-row>
        <ons-col style="text-align: right" onclick="hideDialog('my-dialogDelete')"><ons-icon style="color: #1094bc;" icon="fa-close"></ons-icon></ons-col>
      </ons-row><br>
      <ons-row>
        <ons-col style="text-align: center;"><label>¿Esta seguro de que desea <br> eliminar este contacto</label></ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col><ons-button style="width: 100%; background: #1094bc; color: white;">Si</ons-button></ons-col>
        <ons-col><ons-button style="width: 100%; background: #ED1919; color: white;">Cancelar</ons-button></ons-col>
      </ons-row>
    </div>
  </ons-dialog>
      </ons-page>
  </template>
  <template id="searchContact.html">
    <ons-page>
           <ons-toolbar>
        <div class="left">
          <ons-toolbar-button>
            <ons-icon onclick="fn.load('home.html')" icon="fa-angle-left"></ons-icon>
          </ons-toolbar-button>
        </div>
        <div class="center">
          Contactos
        </div>
        <div class="right">
          <ons-toolbar-button onclick="fn.open()">
            <ons-icon icon="md-menu"></ons-icon>
          </ons-toolbar-button>
        </div>
      </ons-toolbar>
      <br><br>
      <ons-row>
        <ons-col>
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col>
          Contacto 1 <br><div style="font-size: 10px;">Contacto@gmail.com</div>
        </ons-col>
        <ons-col></ons-col>
        <ons-col style=" text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col>
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col>
          Contacto 2 <br><div style="font-size: 10px;">ContactoNe@gmail.com</div>
        </ons-col>
        <ons-col></ons-col>
        <ons-col style=" text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col>
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col>
          Contacto 3 <br><div style="font-size: 10px;">ContactoTwo@gmail.com</div>
        </ons-col>
        <ons-col></ons-col>
        <ons-col style=" text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col>
          <ons-icon icon="fa-user" size="30px"></ons-icon>
        </ons-col>
        <ons-col>
          Contacto 4 <br><div style="font-size: 10px;">ContactoFour@gmail.com</div>
        </ons-col>
        <ons-col></ons-col>
        <ons-col style=" text-align: right;">
          <ons-icon icon="fa-trash"  onclick="showTemplateDialogTwo()" size="30px"></ons-icon>
        </ons-col>
      </ons-row><br><br>
      <footer id="dos">
        <ons-row>
          <ons-row>
            <ons-col style="border: black 1px solid;"  onclick="showTemplateDialog()"><ons-icon icon="fa-user-plus"></ons-icon></ons-col>
            <ons-col style="border: black 1px solid;"><label>CorreoNuevo@gmail.com</label></ons-col>
            <ons-col></ons-col>
             <ons-col></ons-col>
              <ons-col></ons-col>
              <ons-col></ons-col>
               <ons-col></ons-col>
          </ons-row>
          <ons-row>
            <ons-col style="border: black 1px solid;"  onclick="showTemplateDialog()"><ons-icon icon="fa-user-plus"></ons-icon></ons-col>
            <ons-col style="border: black 1px solid;"><label>NicolasMarshall@gmail.com</label></ons-col>
            <ons-col></ons-col>
             <ons-col></ons-col>
              <ons-col></ons-col>
              <ons-col></ons-col>
               <ons-col></ons-col>
          </ons-row>
          <ons-row>
            <ons-col style="border: black 1px solid;"  onclick="showTemplateDialog()"><ons-icon icon="fa-user-plus"></ons-icon></ons-col>
            <ons-col style="border: black 1px solid;"><label>PedroMarmol@gmail.com</label></ons-col>
            <ons-col></ons-col>
             <ons-col></ons-col>
              <ons-col></ons-col>
              <ons-col></ons-col>
               <ons-col></ons-col>
          </ons-row>
          <ons-col><div style="width: 100%; border-top: #1094 1px solid; border-left: #1094 1px solid; border-right: #1094 1px solid;"><br></div><ons-input style="width: 100%; border-left: #1094bc 1px solid; border-right: #1094bc 1px solid; border-bottom: #1094bc 1px solid;" trannsparent placeholder="Buscar conocidos"></ons-input></ons-col>
          <ons-col style="text-align: center"><ons-button style="width: 100%; background: #1094bc; color: white; height: 52px;"><ons-icon icon="fa-user-plus"></ons-icon> Añadir</ons-button></ons-col>
        </ons-row>
      </footer>
      <ons-dialog id="my-dialog">
    <div style="text-align: center; padding: 10px;">
      <ons-row>
        <ons-col style="text-align: right" onclick="hideDialog('my-dialog')"><ons-icon style="color: #1094bc;" icon="fa-close"></ons-icon></ons-col>
      </ons-row><br>
      <ons-row>
        <ons-col style="text-align: center;"><label>Usuario Agregado!</label></ons-col>
      </ons-row>
    </div>
  </ons-dialog>
      <ons-dialog id="my-dialogDelete">
    <div style="text-align: center; padding: 10px;">
      <ons-row>
        <ons-col style="text-align: right" onclick="hideDialog('my-dialogDelete')"><ons-icon style="color: #1094bc;" icon="fa-close"></ons-icon></ons-col>
      </ons-row><br>
      <ons-row>
        <ons-col style="text-align: center;"><label>¿Esta seguro de que desea <br> eliminar este contacto</label></ons-col>
      </ons-row><br><br>
      <ons-row>
        <ons-col><ons-button style="width: 100%; background: #1094bc; color: white;">Si</ons-button></ons-col>
        <ons-col><ons-button style="width: 100%; background: #ED1919; color: white;">Cancelar</ons-button></ons-col>
      </ons-row>
    </div>
  </ons-dialog>

    </ons-page>
  </template>
    <script src="cordova.js"></script>
  <script src="js/app.js"></script>
</body>
</html>